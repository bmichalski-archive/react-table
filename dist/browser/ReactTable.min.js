!function(e,t){"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?module.exports=t(require("react")):e.TableHeadTh=t(e.React)}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(o){function i(){return t(this,i),n(this,Object.getPrototypeOf(i).apply(this,arguments))}return r(i,o),a(i,[{key:"render",value:function(){return e.createElement("th",null,this.props.children)}}]),i}(e.Component);return o}),function(e,t){"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?module.exports=t(require("react")):e.TableHeadRow=t(e.React)}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(o){function i(){return t(this,i),n(this,Object.getPrototypeOf(i).apply(this,arguments))}return r(i,o),a(i,[{key:"render",value:function(){return e.createElement("tr",null,this.props.children)}}]),i}(e.Component);return o}),function(e,t){"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?module.exports=t(require("react")):e.TableHead=t(e.React)}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(o){function i(){return t(this,i),n(this,Object.getPrototypeOf(i).apply(this,arguments))}return r(i,o),a(i,[{key:"render",value:function(){return e.createElement("thead",null,this.props.children)}}]),i}(e.Component);return o}),function(e,t){"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?module.exports=t(require("react")):e.Table=t(e.React)}(this,function(e){"use strict";function t(e){return e===parseInt(e,10)}function n(e){return t(e)&&e>0}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(t){function s(e){r(this,s);var t=a(this,Object.getPrototypeOf(s).call(this,e));return t.state={pageSize:e.pageSize,currentPage:e.currentPage,q:e.q,totalPages:Math.ceil(e.totalResult/e.pageSize)},t}return o(s,t),i(s,[{key:"componentWillReceiveProps",value:function(e){this.setState({pageSize:e.pageSize,currentPage:e.currentPage,q:e.q,totalPages:Math.ceil(e.totalResult/e.pageSize)})}},{key:"_makeLink",value:function(e,t,n){var r={};return e>1&&(r.page=e),t>10&&(r.pageSize=t),this.props.makeLink(r.page,r.pageSize,n)}},{key:"_handleClick",value:function(e,t){t.preventDefault(),this.props.goToPage(this._makeLink(e,this.state.pageSize))}},{key:"_getClassName",value:function(e){return this.state.currentPage===e?"current":null}},{key:"_previous",value:function(e){return this._previousDisabled()?void e.preventDefault():void this._handleClick(this.state.currentPage-1,e)}},{key:"_next",value:function(e){return this._nextDisabled()?void e.preventDefault():void this._handleClick(this.state.currentPage+1,e)}},{key:"_first",value:function(e){return this._firstDisabled()?void e.preventDefault():void this._handleClick(1,e)}},{key:"_last",value:function(e){return this._lastDisabled()?void e.preventDefault():void this._handleClick(this.state.totalPages,e)}},{key:"_firstDisabled",value:function(){return this.state.currentPage<=1}},{key:"_lastDisabled",value:function(){return this.state.currentPage>=this.state.totalPages}},{key:"_previousDisabled",value:function(){return this._firstDisabled()}},{key:"_nextDisabled",value:function(){return this._lastDisabled()}},{key:"_handlePageSizeChange",value:function(e){var t=parseInt(e.target.value,10);this.props.goToPage(this._makeLink(1,t))}},{key:"_handleGoToChanged",value:function(e){this.setState({goTo:parseInt(e.target.value,10)})}},{key:"_doGoToPage",value:function(){this.props.goToPage(this._makeLink(this.state.goTo,this.state.pageSize,this.state.q))}},{key:"_handleKeyDown",value:function(e,t){if(13===e.keyCode){if(e.preventDefault(),t())return;this._doGoToPage()}}},{key:"_handleGoToKeyDown",value:function(e){this._handleKeyDown(e,this._goToPageDisabled.bind(this))}},{key:"_handleQChanged",value:function(e){var t,n=this,r=e.target.value;t=""===r?void 0:r,this.setState({q:t,page:1},function(){clearTimeout(n._debounceQ),n._debounceQ=setTimeout(n._doGoToPage.bind(n),200)})}},{key:"_goToPageDisabled",value:function(){return!n(this.state.goTo)||this.state.goTo<1}},{key:"_goToPage",value:function(e){e.preventDefault(),this._goToPageDisabled()||this._doGoToPage()}},{key:"render",value:function(){var t=this;return e.createElement("div",{className:"paginator-wrapper"},function(){if(t.props.pageSizeSelector||t.props.goTo||t.props.filtering)return e.createElement("div",{className:"row"},function(){if(t.props.pageSizeSelector)return e.createElement("div",{className:"col-md-1"},e.createElement("div",{className:"page-size-selector form-group"},e.createElement("label",null,"Page size ",e.createElement("select",{className:"form-control",value:t.state.pageSize,onChange:t._handlePageSizeChange.bind(t)},e.createElement("option",{value:10},"10"),e.createElement("option",{value:25},"25"),e.createElement("option",{value:50},"50"),e.createElement("option",{value:100},"100")))))}(),function(){if(t.props.goTo)return e.createElement("div",{className:"col-md-2"},e.createElement("div",{className:"page-selector form-group"},e.createElement("label",null,"Go to page",e.createElement("div",{className:"input-group"},e.createElement("input",{type:"text",className:"form-control",placeholder:"Current page:",onChange:t._handleGoToChanged.bind(t),onKeyDown:t._handleGoToKeyDown.bind(t)}),e.createElement("div",{className:"input-group-btn"},e.createElement("button",{className:"btn btn-default ",disabled:t._goToPageDisabled(),onClick:t._goToPage.bind(t)},"Go"))))))}(),function(){if(t.props.filtering)return e.createElement("div",{className:"col-md-2"},e.createElement("label",null,"Filter",e.createElement("input",{type:"text",className:"form-control",defaultValue:t.state.q,placeholder:"Filter:",onChange:t._handleQChanged.bind(t)})))}())}(),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-md-12"},e.createElement("ul",{className:"pagination"},function(){function n(e,t){for(var n=e-1;n<t;n+=1){var r=n+1;u(r,n)}}var r=parseInt(t.state.currentPage,10),a=[],o=t._firstDisabled(),i=t._lastDisabled(),s=t._previousDisabled(),l=t._nextDisabled();a.push(e.createElement("li",{key:"first",className:o?"disabled":null},e.createElement("a",{disabled:o,href:o?"":t._makeLink(1,t.state.pageSize),onClick:t._first.bind(t)},e.createElement("span",null,"«")))),a.push(e.createElement("li",{key:"previous",className:s?"disabled":null},e.createElement("a",{disabled:s,href:s?"":t._makeLink(r-1,t.state.pageSize),onClick:t._previous.bind(t)},e.createElement("span",null,"‹"))));var u=function(n,r){a.push(e.createElement("li",{key:r,className:t._getClassName(n)},e.createElement("a",{href:t._makeLink(n,t.state.pageSize),onClick:t._handleClick.bind(t,n)},e.createElement("span",null,n))))};if(t.state.totalPages<=t.props.maximumPages)n(1,t.state.totalPages);else{var c=t.props.maximumPages/2+1;if(t.state.currentPage<=c)n(1,t.props.maximumPages);else if(t.state.currentPage>=t.state.totalPages-(c-2))n(t.state.totalPages-(t.props.maximumPages-1),t.state.totalPages);else{var p=t.state.currentPage+(c-2);n(t.state.currentPage-(c-1),p<t.state.totalPages?p:t.state.totalPages)}}return a.push(e.createElement("li",{key:"next",className:l?"disabled":null},e.createElement("a",{disabled:l,href:l?"":t._makeLink(r+1,t.state.pageSize),onClick:t._next.bind(t)},e.createElement("span",null,"›")))),a.push(e.createElement("li",{key:"last",className:i?"disabled":null},e.createElement("a",{disabled:i,href:i?"":t._makeLink(t.state.totalPages,t.state.pageSize),onClick:t._last.bind(t)},e.createElement("span",null,"»")))),a}()))))}}]),s}(e.Component);s.propTypes={totalResult:e.PropTypes.number.isRequired,currentPage:e.PropTypes.number.isRequired,pageSize:e.PropTypes.number.isRequired,q:e.PropTypes.string,goToPage:e.PropTypes.func.isRequired,makeLink:e.PropTypes.func.isRequired,pageSizeSelector:e.PropTypes.bool.isRequired,goTo:e.PropTypes.bool.isRequired,filtering:e.PropTypes.bool.isRequired,maximumPages:function(e,t){var r=e[t];if(!n(r))throw new Error("Invalid maximumPages, expecting positive integer, got "+r);if(r%2>0)throw new Error("Expecting even number, got "+r)}},s.defaultProps={maximumPages:10,pageSizeSelector:!1,goTo:!1,filtering:!1};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(t){function n(){return r(this,n),a(this,Object.getPrototypeOf(n).apply(this,arguments))}return o(n,t),i(n,[{key:"render",value:function(){var t=this,n=this.props.data;return e.createElement("tr",null,function(){var r=[];return n.forEach(function(a,o){r.push(e.createElement("td",{key:o,onClick:t.props.onCellClicked.bind(void 0,n,o,t.props.rowIndex)},t.props.renderCell(a,o,t.props.rowIndex)))}),r}())}}]),n}(e.Component);l.propTypes={rowIndex:function(e,n){var r=e[n];if(!t(r))throw new Error("Invalid rowIndex, expecting number, got "+r)},renderCell:e.PropTypes.func.isRequired,onCellClicked:e.PropTypes.func.isRequired,data:e.PropTypes.array.isRequired},l.defaultProps={renderCell:function(e){return e},onCellClicked:function(){}};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(t){function n(){return r(this,n),a(this,Object.getPrototypeOf(n).apply(this,arguments))}return o(n,t),i(n,[{key:"render",value:function(){var t=this;if(0===this.props.data.length)return e.createElement("div",null,this.props.emptyTableMessage);var n=[];return this.props.data.forEach(function(r,a){n.push(e.createElement(l,{key:a,data:r,rowIndex:a,onCellClicked:t.props.onCellClicked,renderCell:t.props.renderCell}))}),e.createElement("table",{className:this.props.tableClassName},this.props.children,e.createElement("tbody",null,n))}}]),n}(e.Component);u.propTypes={data:e.PropTypes.array.isRequired,emptyTableMessage:e.PropTypes.string.isRequired,tableClassName:e.PropTypes.string.isRequired,renderCell:e.PropTypes.func,onCellClicked:e.PropTypes.func},u.defaultProps={emptyTableMessage:"No data to display with given parameters.",tableClassName:"table table-bordered"};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(t){function n(e){r(this,n);var t=a(this,Object.getPrototypeOf(n).call(this,e));return t.state={loading:!0,errorLoadingData:!1},t._updateStateFromRemoteSource(e.getData),t}return o(n,t),i(n,[{key:"componentWillReceiveProps",value:function(e){this.setState({loading:!0,errorLoadingData:!1}),this._updateStateFromRemoteSource(e.getData)}},{key:"_updateStateFromRemoteSource",value:function(e){var t=this;void 0!==this._promise&&this._promise.cancel(),this._promise=e(),this._promise.then(function(e){t._updateStateFromFetchedData(e)}).catch(function(e){throw t.setState({loading:!1,errorLoadingData:!0}),e}).done()}},{key:"_updateStateFromFetchedData",value:function(e){this.setState({data:e,totalResult:e.info.totalFiltered,loading:!1,errorLoadingData:!1})}},{key:"render",value:function(){var t=this;return void 0===this.state.totalResult?e.createElement("div",null,this.props.loadingMessage):this.state.errorLoadingData?e.createElement("div",null,this.props.errorLoadingDataMessage):e.createElement("div",{className:"table-wrapper"},e.createElement("div",{className:"row"},e.createElement("div",{className:"col-md-12"},e.createElement(s,{totalResult:this.state.totalResult,currentPage:this.props.paginator.page,pageSize:this.props.paginator.pageSize,q:this.props.paginator.q,goToPage:this.props.paginator.goToPage.bind(this.props.paginator),makeLink:this.props.paginator.makeLink.bind(this.props.paginator),pageSizeSelector:!0,goTo:!0,filtering:!0}))),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-md-12"},function(){return t.state.loading?e.createElement("div",null,t.props.loadingMessage):e.createElement(u,{data:t.state.data.result,renderCell:t.props.renderCell,onCellClicked:t.props.onCellClicked,emptyTableMessage:t.props.emptyTableMessage,tableClassName:t.props.tableClassName},t.props.children)}())),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-md-12"},e.createElement(s,{totalResult:this.state.totalResult,currentPage:this.props.paginator.page,pageSize:this.props.paginator.pageSize,q:this.props.paginator.q,goToPage:this.props.paginator.goToPage.bind(this.props.paginator),makeLink:this.props.paginator.makeLink.bind(this.props.paginator)}))))}}]),n}(e.Component);return c.propTypes={emptyTableMessage:e.PropTypes.string.isRequired,errorLoadingDataMessage:e.PropTypes.string.isRequired,loadingMessage:e.PropTypes.string.isRequired,tableClassName:e.PropTypes.string.isRequired,paginator:e.PropTypes.shape({page:e.PropTypes.number.isRequired,pageSize:e.PropTypes.number.isRequired,goToPage:e.PropTypes.func.isRequired,makeLink:e.PropTypes.func.isRequired}).isRequired,renderCell:e.PropTypes.func,onCellClicked:e.PropTypes.func},c.defaultProps={emptyTableMessage:"No data to display with given parameters.",errorLoadingDataMessage:"Error loading data.",loadingMessage:"Loading data...",tableClassName:"table table-bordered"},c}),function(e,t){"function"==typeof define&&define.amd?define(["react-router"],t):"object"==typeof exports?module.exports=t(require("react-router")):e.ReactRouterPaginator=t(e.ReactRouter)}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(){function r(e){t(this,r),this.location=e}return n(r,[{key:"goToPage",value:function(t){e.browserHistory.push(t)}},{key:"makeLink",value:function(t,n,r){var a={};for(var o in this._location.query)this._location.query.hasOwnProperty(o)&&(a[o]=this._location.query[o]);return a.page=t,a.pageSize=n,a.q=r,e.browserHistory.createPath({pathname:this._location.pathname,query:a})}},{key:"location",set:function(e){return this._location=e,this}},{key:"page",get:function(){return r.getAsIntegerOrGetDefaultValue(this._location.query.page,1)}},{key:"pageSize",get:function(){return r.getAsIntegerOrGetDefaultValue(this._location.query.pageSize,10)}},{key:"q",get:function(){var e=this._location.query.q;return""===e?void 0:e}}],[{key:"getAsIntegerOrGetDefaultValue",value:function(e,t){return void 0===e?t:parseInt(e,10)}}]),r}();return r});